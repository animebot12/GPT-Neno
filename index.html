<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPT Nano - Advanced AI Chat Assistant | Mr.Arslan Toolkit</title>
    <meta name="description" content="GPT Nano - Your intelligent AI chat assistant powered by Mr.Arslan. Get instant answers, creative content, and smart solutions.">
    <meta name="keywords" content="AI chat, GPT Nano, artificial intelligence, chatbot, AI assistant, Mr.Arslan Toolkit">
    <meta name="author" content="Mr.Arslan">
    <meta property="og:title" content="GPT Nano - Advanced AI Chat Assistant">
    <meta property="og:description" content="Your intelligent AI chat assistant powered by Mr.Arslan">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #0f172a;
            --surface: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --border: #334155;
            --shadow: rgba(0, 0, 0, 0.25);
            --ai-bubble: #1e40af;
            --user-bubble: #3730a3;
        }

        [data-theme="light"] {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --background: #ffffff;
            --surface: #f8fafc;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
            --ai-bubble: #dbeafe;
            --user-bubble: #e0e7ff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--background) 0%, var(--surface) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            transition: all 0.3s ease;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header Styles - Mobile First */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
            animation: slideDown 0.8s ease-out;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary), var(--success));
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            animation: bounce 2s infinite;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--success));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-text p {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .theme-toggle {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 25px;
            padding: 8px 16px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
        }

        .theme-toggle:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.05);
        }

        /* Chat Container - Mobile Optimized */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--surface);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
            animation: fadeInUp 1s ease-out;
            margin-bottom: 20px;
        }

        .chat-header {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            background: linear-gradient(135deg, var(--primary), var(--success));
            color: white;
            text-align: center;
        }

        .chat-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .chat-header p {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 50vh;
        }

        .message {
            display: flex;
            gap: 10px;
            max-width: 90%;
            animation: messageSlide 0.3s ease-out;
        }

        .message.user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .message.ai {
            align-self: flex-start;
        }

        .avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .user .avatar {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .ai .avatar {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        .message-content {
            background: var(--ai-bubble);
            padding: 12px 16px;
            border-radius: 18px;
            border-bottom-left-radius: 4px;
            line-height: 1.5;
            box-shadow: 0 2px 8px var(--shadow);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .user .message-content {
            background: var(--user-bubble);
            border-bottom-left-radius: 18px;
            border-bottom-right-radius: 4px;
        }

        .message-text {
            font-size: 0.9rem;
        }

        .message-time {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-top: 6px;
            text-align: right;
        }

        .user .message-time {
            text-align: left;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            gap: 10px;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-secondary);
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        /* Chat Input - Mobile Optimized */
        .chat-input-container {
            padding: 15px;
            border-top: 1px solid var(--border);
            background: var(--surface);
        }

        .input-group {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 12px 16px;
            border-radius: 25px;
            border: 1px solid var(--border);
            background: var(--background);
            color: var(--text-primary);
            font-size: 16px; /* Prevents zoom on iOS */
            resize: none;
            max-height: 120px;
            min-height: 45px;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            line-height: 1.4;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--primary), var(--success));
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .send-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .action-btn {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 18px;
            padding: 6px 12px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* Features Section - Mobile First */
        .features-section {
            margin: 30px 0;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 25px;
            text-align: center;
            color: var(--text-primary);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: linear-gradient(135deg, var(--primary), var(--success));
            border-radius: 3px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .feature-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
        }

        .feature-icon {
            background: linear-gradient(135deg, var(--primary), var(--success));
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            margin: 0 auto 15px;
            animation: float 3s ease-in-out infinite;
        }

        .feature-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 0 15px;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            animation: fadeInUp 1s ease-out;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }

        .footer-link:hover {
            color: var(--primary);
            transform: translateY(-2px);
        }

        /* Animations */
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-8px);
            }
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: scale(1);
                opacity: 0.5;
            }
            30% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* Mobile Specific Adjustments */
        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }
            
            .header-top {
                padding: 12px 0;
                margin-bottom: 12px;
            }
            
            .logo-icon {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .logo-text h1 {
                font-size: 1.3rem;
            }
            
            .theme-toggle {
                padding: 6px 12px;
                font-size: 12px;
            }
            
            .chat-header {
                padding: 12px;
            }
            
            .chat-header h2 {
                font-size: 1.2rem;
            }
            
            .chat-messages {
                padding: 12px;
                gap: 12px;
            }
            
            .message {
                max-width: 95%;
                gap: 8px;
            }
            
            .avatar {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .message-content {
                padding: 10px 14px;
            }
            
            .message-text {
                font-size: 0.85rem;
            }
            
            .chat-input-container {
                padding: 12px;
            }
            
            .message-input {
                padding: 10px 14px;
                font-size: 16px;
            }
            
            .send-btn {
                width: 40px;
                height: 40px;
            }
            
            .action-buttons {
                gap: 6px;
            }
            
            .action-btn {
                padding: 5px 10px;
                font-size: 0.75rem;
            }
        }

        /* Tablet Styles */
        @media (min-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .header-top {
                margin-bottom: 20px;
                padding: 20px 0;
            }
            
            .logo-icon {
                width: 50px;
                height: 50px;
                font-size: 22px;
            }
            
            .logo-text h1 {
                font-size: 1.8rem;
            }
            
            .logo-text p {
                font-size: 14px;
            }
            
            .theme-toggle {
                padding: 10px 20px;
                font-size: 14px;
            }
            
            .chat-header {
                padding: 20px;
            }
            
            .chat-header h2 {
                font-size: 1.5rem;
            }
            
            .chat-header p {
                font-size: 0.9rem;
            }
            
            .chat-messages {
                padding: 20px;
                gap: 20px;
                max-height: 60vh;
            }
            
            .message {
                max-width: 80%;
                gap: 12px;
            }
            
            .avatar {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
            
            .message-content {
                padding: 15px 20px;
            }
            
            .message-text {
                font-size: 0.95rem;
            }
            
            .chat-input-container {
                padding: 20px;
            }
            
            .message-input {
                padding: 15px 20px;
            }
            
            .send-btn {
                width: 50px;
                height: 50px;
            }
            
            .action-buttons {
                gap: 10px;
                margin-top: 15px;
            }
            
            .action-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
            }
            
            .feature-card {
                padding: 30px;
            }
            
            .feature-icon {
                width: 70px;
                height: 70px;
                font-size: 28px;
            }
            
            .feature-title {
                font-size: 1.3rem;
            }
        }

        /* Desktop Styles */
        @media (min-width: 1024px) {
            .container {
                padding: 30px;
            }
            
            .chat-messages {
                max-height: 65vh;
            }
            
            .message {
                max-width: 70%;
            }
            
            .features-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .action-buttons {
                justify-content: flex-start;
            }
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: var(--background);
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Touch Device Optimizations */
        @media (hover: none) and (pointer: coarse) {
            .action-btn:hover,
            .theme-toggle:hover,
            .send-btn:hover {
                transform: none;
            }
            
            .action-btn:active,
            .theme-toggle:active,
            .send-btn:active {
                transform: scale(0.95);
            }
        }

        /* Prevent text selection on interactive elements */
        .action-btn,
        .theme-toggle,
        .send-btn {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header-top">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="logo-text">
                    <h1>GPT Nano</h1>
                    <p>Advanced AI Chat Assistant</p>
                </div>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <i class="fas fa-moon"></i> <span class="theme-text">Dark Mode</span>
            </button>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-header">
                <h2>Welcome to GPT Nano</h2>
                <p>Your intelligent AI assistant powered by Mr.Arslan</p>
            </div>

            <div class="chat-messages" id="chatMessages">
                <!-- Welcome Message -->
                <div class="message ai">
                    <div class="avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <div class="message-text">
                            Hello! I'm GPT Nano, your AI assistant. I can help you with various tasks like answering questions, writing content, solving problems, and much more. How can I assist you today?
                        </div>
                        <div class="message-time" id="welcomeTime"></div>
                    </div>
                </div>
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            </div>

            <!-- Chat Input -->
            <div class="chat-input-container">
                <div class="input-group">
                    <textarea 
                        class="message-input" 
                        id="messageInput" 
                        placeholder="Type your message here..." 
                        rows="1"
                    ></textarea>
                    <button class="send-btn" id="sendBtn">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <div class="action-buttons">
                    <button class="action-btn" onclick="insertExample('Explain quantum computing in simple terms')">
                        <i class="fas fa-lightbulb"></i> Explain
                    </button>
                    <button class="action-btn" onclick="insertExample('Write a creative story about space exploration')">
                        <i class="fas fa-pen"></i> Write
                    </button>
                    <button class="action-btn" onclick="insertExample('Help me solve this math problem: 2x + 5 = 15')">
                        <i class="fas fa-calculator"></i> Solve
                    </button>
                    <button class="action-btn" onclick="clearChat()">
                        <i class="fas fa-trash"></i> Clear
                    </button>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="features-section">
            <h2 class="section-title">Why Choose GPT Nano</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3 class="feature-title">Lightning Fast</h3>
                    <p class="feature-description">Get instant responses with our optimized AI model that processes requests in milliseconds.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="feature-title">Smart & Intelligent</h3>
                    <p class="feature-description">Powered by advanced AI technology that understands context and provides accurate answers.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="feature-title">Privacy Focused</h3>
                    <p class="feature-description">Your conversations are secure and private. We don't store your personal data.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-infinity"></i>
                    </div>
                    <h3 class="feature-title">Always Available</h3>
                    <p class="feature-description">24/7 access to AI assistance whenever you need help or creative inspiration.</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="footer-links">
                <a href="index.html" class="footer-link">
                    <i class="fas fa-home"></i> Home
                </a>
                <a href="mailto:animebot0299@gmail.com" class="footer-link">
                    <i class="fas fa-envelope"></i> Contact
                </a>
            </div>
            <p>&copy; 2024 Mr.Arslan Toolkit. All rights reserved.</p>
            <p>Created with ❤️ by Mr.Arslan</p>
        </div>
    </div>

    <script>
        // Set welcome message time
        document.getElementById('welcomeTime').textContent = getCurrentTime();

        // Theme management
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeButton(savedTheme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeButton(newTheme);
        }

        function updateThemeButton(theme) {
            const themeToggle = document.querySelector('.theme-toggle');
            const themeText = document.querySelector('.theme-text');
            if (theme === 'dark') {
                themeToggle.innerHTML = '<i class="fas fa-moon"></i> <span class="theme-text">Dark Mode</span>';
            } else {
                themeToggle.innerHTML = '<i class="fas fa-sun"></i> <span class="theme-text">Light Mode</span>';
            }
        }

        // Chat functionality
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const typingIndicator = document.getElementById('typingIndicator');

        // Multiple API endpoints for fallback
        const API_ENDPOINTS = [
            'https://apis-keith.vercel.app/ai/gpt41Nano',
            'https://apis-keith.vercel.app/ai/gpt',
            'https://apis-keith.vercel.app/ai/chat',
            'https://api-inference.huggingface.co/models/gpt2'
        ];

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });

        // Send message on Enter (with Shift for new line)
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button click
        sendBtn.addEventListener('click', sendMessage);

        // Touch device optimizations
        sendBtn.addEventListener('touchstart', function(e) {
            e.preventDefault();
            this.style.transform = 'scale(0.95)';
        });

        sendBtn.addEventListener('touchend', function(e) {
            e.preventDefault();
            this.style.transform = 'scale(1)';
            sendMessage();
        });

        // Insert example text
        function insertExample(text) {
            messageInput.value = text;
            messageInput.focus();
            messageInput.style.height = 'auto';
            messageInput.style.height = Math.min(messageInput.scrollHeight, 120) + 'px';
        }

        // Clear chat
        function clearChat() {
            if (confirm('Are you sure you want to clear the chat history?')) {
                chatMessages.innerHTML = `
                    <div class="message ai">
                        <div class="avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <div class="message-text">
                                Hello! I'm GPT Nano, your AI assistant. I can help you with various tasks like answering questions, writing content, solving problems, and much more. How can I assist you today?
                            </div>
                            <div class="message-time">${getCurrentTime()}</div>
                        </div>
                    </div>
                `;
                scrollToBottom();
            }
        }

        // Get current time for messages
        function getCurrentTime() {
            return new Date().toLocaleTimeString('en-US', { 
                hour: '2-digit', 
                minute: '2-digit',
                hour12: true 
            });
        }

        // Try multiple APIs until one works
        async function tryAPIs(message) {
            for (let i = 0; i < API_ENDPOINTS.length; i++) {
                try {
                    const endpoint = API_ENDPOINTS[i];
                    console.log(`Trying API: ${endpoint}`);
                    
                    let response;
                    if (endpoint.includes('huggingface')) {
                        // Hugging Face API
                        response = await fetch(endpoint, {
                            method: 'POST',
                            headers: {
                                'Authorization': 'Bearer hf_your_token_here',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                inputs: message
                            })
                        });
                    } else {
                        // Keith API
                        response = await fetch(`${endpoint}?q=${encodeURIComponent(message)}`);
                    }
                    
                    if (response.ok) {
                        const data = await response.json();
                        
                        if (data.status && data.result) {
                            return data.result;
                        } else if (data[0] && data[0].generated_text) {
                            // Hugging Face response format
                            return data[0].generated_text;
                        }
                    }
                } catch (error) {
                    console.log(`API ${i + 1} failed:`, error);
                    // Continue to next API
                }
            }
            
            // If all APIs fail, use fallback responses
            return getFallbackResponse(message);
        }

        // Fallback responses when APIs are down
        function getFallbackResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return "Hello! I'm GPT Nano. I'm currently operating in offline mode. How can I help you today?";
            } else if (lowerMessage.includes('how are you')) {
                return "I'm doing well, thank you for asking! I'm here to help you with any questions or tasks you might have.";
            } else if (lowerMessage.includes('name')) {
                return "I'm GPT Nano, your AI assistant created by Mr.Arslan Toolkit.";
            } else if (lowerMessage.includes('help')) {
                return "I can help you with various tasks like answering questions, writing content, solving problems, and providing information. What would you like me to help you with?";
            } else if (lowerMessage.includes('thank')) {
                return "You're welcome! I'm glad I could help. Is there anything else you'd like to know?";
            } else if (lowerMessage.includes('weather')) {
                return "I'm currently operating in offline mode, so I can't access real-time weather data. You might want to check a weather service for current conditions.";
            } else if (lowerMessage.includes('time')) {
                return `The current time is ${new Date().toLocaleTimeString()}.`;
            } else if (lowerMessage.includes('joke')) {
                const jokes = [
                    "Why don't scientists trust atoms? Because they make up everything!",
                    "Why did the scarecrow win an award? He was outstanding in his field!",
                    "Why don't eggs tell jokes? They'd crack each other up!",
                    "What do you call a fake noodle? An impasta!"
                ];
                return jokes[Math.floor(Math.random() * jokes.length)];
            } else {
                return "I understand you're asking: \"" + message + "\". Currently, I'm operating in offline mode due to API limitations. For the full GPT Nano experience with real-time AI responses, please check back later when the service is restored. In the meantime, I can help with basic questions and conversations!";
            }
        }

        // Send message to AI
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessage(message, 'user');
            messageInput.value = '';
            messageInput.style.height = 'auto';
            sendBtn.disabled = true;

            // Show typing indicator
            typingIndicator.style.display = 'flex';
            scrollToBottom();

            try {
                // Try multiple APIs
                const aiResponse = await tryAPIs(message);
                
                // Hide typing indicator
                typingIndicator.style.display = 'none';

                // Add AI response to chat
                addMessage(aiResponse, 'ai');

            } catch (error) {
                // Hide typing indicator
                typingIndicator.style.display = 'none';
                
                // Show error message
                addMessage('I apologize, but I\'m currently experiencing technical difficulties. Please try again in a few moments.', 'ai');
                console.error('Error:', error);
            }

            sendBtn.disabled = false;
            scrollToBottom();
        }

        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatarIcon = sender === 'user' ? 'fas fa-user' : 'fas fa-robot';
            
            messageDiv.innerHTML = `
                <div class="avatar">
                    <i class="${avatarIcon}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">${formatMessage(text)}</div>
                    <div class="message-time">${getCurrentTime()}</div>
                </div>
            `;

            chatMessages.appendChild(messageDiv);
            scrollToBottom();
        }

        // Format message text (basic formatting)
        function formatMessage(text) {
            // Convert line breaks to <br>
            return text.replace(/\n/g, '<br>');
        }

        // Scroll to bottom of chat
        function scrollToBottom() {
            setTimeout(() => {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 100);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            messageInput.focus();
            
            // Add touch event listeners for mobile
            document.addEventListener('touchstart', function() {}, { passive: true });
        });

        // Handle viewport height on mobile
        function setViewportHeight() {
            let vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        setViewportHeight();
        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', setViewportHeight);
    </script>
</body>
</html>
